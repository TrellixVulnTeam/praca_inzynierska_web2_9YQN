{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport { ResponderModel } from 'src/app/models/responders/responder-model';\nimport { UserModel } from 'src/app/models/users/user-model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user/user.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/material/tabs\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nexport let MyProfileComponent = /*#__PURE__*/(() => {\n  class MyProfileComponent {\n    constructor(user, formBuilder, snackBar) {\n      this.user = user;\n      this.formBuilder = formBuilder;\n      this.snackBar = snackBar;\n      this.ok = 'OK';\n      this.changePasswordMessage = '';\n      this.responder = new ResponderModel();\n      this.userMe = new UserModel();\n      this.oldPassword = new FormControl('');\n      this.newPassword = new FormControl('');\n      this.email = new FormControl('');\n      this.firstName = new FormControl('');\n      this.lastName = new FormControl('');\n      this.formPassword = this.formBuilder.group({\n        oldPassword: this.oldPassword,\n        newPassword: this.newPassword\n      });\n      this.formUpdate = this.formBuilder.group({\n        email: this.email,\n        firstName: this.firstName,\n        lastName: this.lastName\n      });\n    }\n\n    ngOnInit() {\n      this.getMe();\n    }\n\n    getFormPasswordControls() {\n      return this.formPassword.controls;\n    }\n\n    getMe() {\n      this.user.getMe().pipe(first()).subscribe(response => {\n        this.userMe = response;\n        this.userMe.userName = response.userName;\n      }, error => {\n        console.error(`ErrorHttp: ${JSON.stringify(error)}`);\n      });\n    }\n\n    getListOfBooks() {}\n\n    changePassword() {\n      if (this.userMe.password != this.oldPassword.value) {\n        this.changePasswordMessage = \"Poprzednie hasło jest nieprawidłowe\";\n        return;\n      }\n\n      this.userMe.password = this.newPassword.value;\n      this.user.updateUser(this.userMe).pipe(first()).subscribe(response => {\n        this.changePasswordMessage = \"Hasło zostało zmienione\";\n      }, error => {\n        this.changePasswordMessage = error;\n      });\n      this.openSnackBar(this.changePasswordMessage, this.ok);\n    }\n\n    updateUser() {\n      this.userMe.email = this.email.value;\n      this.userMe.name = this.firstName.value;\n      this.userMe.surname = this.lastName.value;\n      this.user.updateUser(this.userMe).pipe(first()).subscribe(response => {\n        this.changePasswordMessage = \"Dane zostały zaktualizowane\";\n      }, error => {\n        this.changePasswordMessage = error;\n      });\n    }\n\n    openSnackBar(message, action) {\n      this.snackBar.open(message, action);\n    }\n\n  }\n\n  MyProfileComponent.ɵfac = function MyProfileComponent_Factory(t) {\n    return new (t || MyProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  MyProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MyProfileComponent,\n    selectors: [[\"app-my-profile\"]],\n    decls: 77,\n    vars: 22,\n    consts: [[1, \"centerMe\"], [2, \"background-color\", \"#686868\", \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [3, \"label\"], [2, \"text-align\", \"left\", \"padding-left\", \"150px\", \"padding-top\", \"60px\", \"padding-bottom\", \"60px\"], [2, \"font-size\", \"18px\"], [2, \"padding-left\", \"40px\"], [2, \"padding-left\", \"154px\"], [2, \"padding-left\", \"164px\"], [2, \"padding-left\", \"124px\"], [2, \"padding-left\", \"116px\"], [\"label\", \"Zmiana has\\u0142a\"], [2, \"margin-top\", \"40px\", \"padding-top\", \"40px\"], [2, \"font-size\", \"24px\"], [3, \"formGroup\", \"ngSubmit\"], [2, \"margin\", \"auto\", \"margin-top\", \"40px\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"poprzednie has\\u0142o\", \"formControlName\", \"oldPassword\"], [2, \"margin\", \"auto\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"poprzednie has\\u0142o\", \"formControlName\", \"newPassword\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"accent\", 2, \"margin-top\", \"30px\"], [\"label\", \"Aktualizacja danych\"], [\"type\", \"email\", \"matInput\", \"\", \"formControlName\", \"email\", 3, \"placeholder\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"firstName\", 3, \"placeholder\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"lastName\", 3, \"placeholder\"]],\n    template: function MyProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"mat-tab-group\", 1);\n        i0.ɵɵelementStart(2, \"mat-tab\", 2);\n        i0.ɵɵelementStart(3, \"mat-card\", 3);\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵelementStart(5, \"mat-label\", 4);\n        i0.ɵɵtext(6, \"Nazwa u\\u017Cytkownika:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"mat-label\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p\");\n        i0.ɵɵelementStart(10, \"mat-label\", 4);\n        i0.ɵɵtext(11, \"email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-label\", 6);\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p\");\n        i0.ɵɵelementStart(15, \"mat-label\", 4);\n        i0.ɵɵtext(16, \"imie:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-label\", 7);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\");\n        i0.ɵɵelementStart(20, \"mat-label\", 4);\n        i0.ɵɵtext(21, \"nazwisko:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-label\", 8);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"p\");\n        i0.ɵɵelementStart(25, \"mat-label\", 4);\n        i0.ɵɵtext(26, \"p\\u0142e\\u0107:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"mat-label\", 7);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"p\");\n        i0.ɵɵelementStart(30, \"mat-label\", 4);\n        i0.ɵɵtext(31, \"polubienia:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"mat-label\", 9);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-tab\", 10);\n        i0.ɵɵelementStart(35, \"mat-card\", 11);\n        i0.ɵɵelementStart(36, \"mat-label\", 12);\n        i0.ɵɵtext(37, \"ZMIANA HAS\\u0141A\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"mat-card-content\");\n        i0.ɵɵelementStart(39, \"form\", 13);\n        i0.ɵɵlistener(\"ngSubmit\", function MyProfileComponent_Template_form_ngSubmit_39_listener() {\n          return ctx.changePassword();\n        });\n        i0.ɵɵelementStart(40, \"p\");\n        i0.ɵɵelementStart(41, \"mat-form-field\", 14);\n        i0.ɵɵelementStart(42, \"mat-label\");\n        i0.ɵɵtext(43, \"Poprzednie has\\u0142o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"p\");\n        i0.ɵɵelementStart(46, \"mat-form-field\", 16);\n        i0.ɵɵelementStart(47, \"mat-label\");\n        i0.ɵɵtext(48, \"Nowe has\\u0142o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"p\");\n        i0.ɵɵelementStart(51, \"button\", 18);\n        i0.ɵɵtext(52, \"Zmiana has\\u0142a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"mat-tab\", 19);\n        i0.ɵɵelementStart(54, \"mat-card\", 11);\n        i0.ɵɵelementStart(55, \"mat-label\", 12);\n        i0.ɵɵtext(56, \"AKTUALIZACJA DANYCH\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"mat-card-content\");\n        i0.ɵɵelementStart(58, \"form\", 13);\n        i0.ɵɵlistener(\"ngSubmit\", function MyProfileComponent_Template_form_ngSubmit_58_listener() {\n          return ctx.updateUser();\n        });\n        i0.ɵɵelementStart(59, \"p\");\n        i0.ɵɵelementStart(60, \"mat-form-field\", 14);\n        i0.ɵɵelementStart(61, \"mat-label\");\n        i0.ɵɵtext(62, \"E-mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(63, \"input\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"p\");\n        i0.ɵɵelementStart(65, \"mat-form-field\", 16);\n        i0.ɵɵelementStart(66, \"mat-label\");\n        i0.ɵɵtext(67, \"Imi\\u0119\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(68, \"input\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"p\");\n        i0.ɵɵelementStart(70, \"mat-form-field\", 16);\n        i0.ɵɵelementStart(71, \"mat-label\");\n        i0.ɵɵtext(72, \"Nazwisko\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(73, \"input\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"p\");\n        i0.ɵɵelementStart(75, \"button\", 18);\n        i0.ɵɵtext(76, \"Uaktualnij dane\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate(\"label\", ctx.userMe.userName);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userMe.userName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userMe.email);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userMe.name);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userMe.surname);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userMe.sex);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userMe.likes);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formPassword);\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"width\", 350, \"px\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵstyleProp(\"width\", 350, \"px\");\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"formGroup\", ctx.formUpdate);\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"width\", 350, \"px\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.userMe.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"width\", 350, \"px\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.userMe.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"width\", 350, \"px\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.userMe.surname);\n      }\n    },\n    directives: [i4.MatTabGroup, i4.MatTab, i5.MatCard, i6.MatLabel, i5.MatCardContent, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i6.MatFormField, i7.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i8.MatButton],\n    styles: [\"body[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.centerMe[_ngcontent-%COMP%]{min-width:300px;max-width:800px;margin:auto;text-align:center}\"]\n  });\n  return MyProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}